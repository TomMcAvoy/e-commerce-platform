const request = require('supertest');
const app = require('../../app');

describe('Product Controller', () => {
    it('should create a product', async () => {
        const newProduct = {
            category: 'Test Category',
            description: 'This is a test product',
            name: 'Test Product',
            price: 100
        };
        const response = await request(app).post('/api/products').send(newProduct);
        expect(response.status).toBe(201);
        expect(response.body).toHaveProperty('id');
    });

    it('should update a product', async () => {
        const updatedProduct = {
            name: 'Updated Product'
        };
        const response = await request(app).put('/api/products/1').send(updatedProduct);
        expect(response.status).toBe(200);
        expect(response.body.name).toBe('Updated Product');
    });

    it('should delete a product', async () => {
        const response = await request(app).delete('/api/products/1');
        expect(response.status).toBe(204);
    });
});