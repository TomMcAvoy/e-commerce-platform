(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{2732:function(t,e,n){Promise.resolve().then(n.bind(n,1951)),Promise.resolve().then(n.t.bind(n,4742,23)),Promise.resolve().then(n.t.bind(n,7960,23))},1951:function(t,e,n){"use strict";n.d(e,{AppProvider:function(){return a}});var r=n(7437),i=n(575);function a(t){let{children:e}=t;return(0,r.jsx)(i.H,{children:e})}},575:function(t,e,n){"use strict";n.d(e,{H:function(){return u},a:function(){return o}});var r=n(7437),i=n(2265),a=n(9116);let s=(0,i.createContext)(void 0);function u(t){let{children:e}=t,[n,u]=(0,i.useState)(null),[o,c]=(0,i.useState)(!1),[l,f]=(0,i.useState)(!0),h=(0,i.useCallback)(async()=>{try{let t=await a.x1.privateRequest("/auth/me");t&&t.data?(u(t.data),c(!0)):(u(null),c(!1))}catch(t){u(null),c(!1)}finally{f(!1)}},[]);return(0,i.useEffect)(()=>{h()},[h]),(0,r.jsx)(s.Provider,{value:{user:n,isAuthenticated:o,isLoading:l,checkAuth:h},children:e})}function o(){let t=(0,i.useContext)(s);if(void 0===t)throw Error("useAuth must be used within an AuthProvider");return t}},9116:function(t,e,n){"use strict";n.d(e,{CP:function(){return y},Nq:function(){return o},Zr:function(){return l},d4:function(){return f},fg:function(){return d},tM:function(){return h},ts:function(){return u},x1:function(){return s},xZ:function(){return c}});let r="http://localhost:3000/api",i="6884bf4702e02fe6eb401303";class a{async request(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n="".concat(this.baseUrl).concat(t),r=new Headers(e.headers||{});r.has("Content-Type")||e.body instanceof FormData||r.set("Content-Type","application/json"),r.set("x-tenant-id",i);let a={...e,headers:r,credentials:"include"},s=await fetch(n,a),u=s.headers.get("content-type");if(u&&u.includes("application/json")&&await s.json(),!s.ok)throw Error((await s.json().catch(()=>({message:"An unknown error occurred"}))).message||"API request failed");let o=await s.text();return o?JSON.parse(o):{}}publicRequest(t,e){return this.request(t,e)}privateRequest(t,e){return this.request(t,e)}async login(t,e){return this.request("/auth/login",{method:"POST",body:JSON.stringify({email:t,password:e})})}async register(t){return this.request("/auth/register",{method:"POST",body:JSON.stringify(t)})}async logout(){return this.request("/auth/logout",{method:"GET"})}constructor(){this.baseUrl=r}}let s=new a;async function u(){return await s.request("/auth/me",{method:"GET"})}async function o(t){return await s.request("/users/profile",{method:"PUT",body:JSON.stringify(t)})}async function c(){return await s.request("/news/refresh",{method:"POST"})}async function l(){return await s.request("/news/region/major")}async function f(){return await s.request("/news/region/scottish")}async function h(){return await s.request("/news/region/canadian")}async function d(t,e){return await s.request("/dropshipping/import",{method:"POST",body:JSON.stringify({provider:t,categoryId:e})})}async function y(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new URL("".concat(r,"/categories"));t.limit&&e.searchParams.append("limit",String(t.limit));let n=await fetch(e.toString(),{headers:{"x-tenant-id":i},next:{revalidate:300}});if(!n.ok)throw Error("Failed to fetch categories");return(await n.json()).data||[]}},7960:function(){},4742:function(t){t.exports={style:{fontFamily:"'__Inter_e8ce0c', '__Inter_Fallback_e8ce0c'",fontStyle:"normal"},className:"__className_e8ce0c"}}},function(t){t.O(0,[540,971,117,744],function(){return t(t.s=2732)}),_N_E=t.O()}]);